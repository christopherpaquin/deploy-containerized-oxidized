---
# Oxidized Configuration
# This file should be deployed to: /var/lib/oxidized/config/config
# Inside the container it will be mounted at: /home/oxidized/.config/oxidized/config

# Username and password for device login
# SECURITY: These should be set via environment variables in production
# Set these in the Quadlet file or use a secrets manager
username: oxidized
password: oxidized

# Polling interval in seconds (3600 = hourly)
interval: 3600

# Log configuration
# DEPRECATED: "log" is deprecated, use "logger" instead
logger:
  file: /home/oxidized/.config/oxidized/data/oxidized.log

# Debugging (set to true for troubleshooting)
debug: false
threads: 30
timeout: 20
retries: 3
prompt: !ruby/regexp /^([\w.@-]+[#>]\s?)$/
next_adds_job: false

# REST API and Web UI configuration (oxidized-web extension)
# Note: Inside container, always bind to 0.0.0.0
# Port publishing in Quadlet exposes this to OXIDIZED_API_HOST externally
# IMPORTANT: oxidized 0.35.0 with oxidized-web 0.18.0 requires BOTH formats:
#   - New format: extensions.oxidized-web (for future compatibility)
#   - Legacy format: rest: (required for web server to initialize)
# The deprecated warning is expected and harmless
extensions:
  oxidized-web:
    host: 0.0.0.0
    port: 8888
# Legacy format (required for oxidized-web initialization in 0.35.0)
rest: 0.0.0.0:8888

# Input configuration
input:
  default: ssh, telnet
  debug: false
  ssh:
    secure: false

# Output configuration - Git repository
output:
  default: git
  git:
    user: Oxidized
    email: oxidized@example.com
    repo: /home/oxidized/.config/oxidized/repo

# Source configuration - CSV router database
# Supports two credential modes:
#   1. Per-device: Specify username/password in router.db (columns 4 & 5)
#   2. Global: Leave columns 4 & 5 blank, uses global username/password above
source:
  default: csv
  csv:
    file: /home/oxidized/.config/oxidized/router.db
    delimiter: !ruby/regexp /:/
    map:
      name: 0
      ip: 1
      model: 2
      group: 3
      username: 4
      password: 5
    gpg: false

# Model-specific configurations
# Add device models as needed
models: {}

# Group-specific configurations
groups: {}

# PID file location
pid: /home/oxidized/.config/oxidized/data/oxidized.pid

# Crash directory for debugging
crash:
  directory: /home/oxidized/.config/oxidized/data/crashes
  hostnames: false

# Stats configuration
stats:
  history_size: 10

# Hooks for notifications (optional)
# Uncomment and configure as needed
# hooks:
#   slack:
#     type: slackdiff
#     events: [post_store]
#     url: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
